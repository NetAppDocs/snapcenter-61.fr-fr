---
permalink: protect-nsp/restore_a_resource_backup.html 
sidebar: sidebar 
keywords: restore 
summary: Vous pouvez utiliser SnapCenter pour restaurer les ressources.  Les capacités des opérations de restauration dépendent du plug-in que vous utilisez. 
---
= Restaurer une sauvegarde de ressources
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
Vous pouvez utiliser SnapCenter pour restaurer les ressources.  Les capacités des opérations de restauration dépendent du plug-in que vous utilisez.

.Avant de commencer
* Vous devez avoir sauvegardé la ressource ou les groupes de ressources.
* L'administrateur SnapCenter doit vous avoir attribué les machines virtuelles de stockage (SVM) pour les volumes sources et les volumes de destination si vous répliquez des snapshots vers un miroir ou un coffre.
* Vous devez avoir annulé toute opération de sauvegarde actuellement en cours pour la ressource ou le groupe de ressources que vous souhaitez restaurer.


.À propos de cette tâche
* L'opération de restauration par défaut restaure uniquement les objets de stockage.  Les opérations de restauration au niveau de l'application ne peuvent être effectuées que si le plug-in pris en charge par NetApp fournit cette capacité.
* Pour ONTAP 9.12.1 et les versions antérieures, les clones créés à partir des instantanés SnapLock Vault dans le cadre de la restauration hériteront du délai d'expiration de SnapLock Vault. L'administrateur de stockage doit nettoyer manuellement les clones après l'expiration de SnapLock .


[role="tabbed-block"]
====
.Interface utilisateur de SnapCenter
--
.Étapes
. Dans le volet de navigation de gauche, cliquez sur *Ressources*, puis sélectionnez le plug-in approprié dans la liste.
. Dans la page Ressources, filtrez les ressources de la liste déroulante *Afficher* en fonction du type de ressource.
+
Les ressources sont affichées avec des informations telles que le type, le nom de l'hôte ou du cluster, les groupes de ressources et les politiques associés, ainsi que l'état.

+

NOTE: Bien qu'une sauvegarde puisse concerner un groupe de ressources, lors de la restauration, vous devez sélectionner les ressources individuelles que vous souhaitez restaurer.

+
Si la ressource n'est pas protégée, _Non protégé_ s'affiche dans la colonne *État général*.

+
Le statut _Non protégé_ dans la colonne *Statut général* peut signifier soit que la ressource n'est pas protégée, soit que la ressource a été sauvegardée par un autre utilisateur.

. Sélectionnez la ressource ou sélectionnez un groupe de ressources, puis sélectionnez une ressource dans ce groupe.
+
La page de topologie des ressources s'affiche.

. Dans la vue *Gérer les copies*, sélectionnez *Sauvegardes* à partir des systèmes de stockage principal ou secondaire (en miroir ou en coffre).
. Dans le tableau Sauvegarde(s) principale(s), sélectionnez la sauvegarde à partir de laquelle vous souhaitez effectuer la restauration, puis cliquez surimage:../media/restore_icon.gif["icône de restauration"] .
+
image::../media/restoring_resource.gif[restaurer les ressources]

. Dans la page Étendue de la restauration, sélectionnez *Ressource complète* ou *Niveau de fichier*.
+
.. Si vous avez sélectionné *Ressource complète*, la sauvegarde de la ressource est restaurée.
+
Si la ressource contient des volumes ou des qtrees comme empreinte de stockage, les snapshots les plus récents sur ces volumes ou qtrees sont supprimés et ne peuvent pas être récupérés.  De plus, si une autre ressource est hébergée sur les mêmes volumes ou qtrees, cette ressource est également supprimée.

.. Si vous avez sélectionné *Niveau de fichier*, vous pouvez alors sélectionner *Tous*, ou sélectionner des volumes ou des qtrees, puis saisir le chemin associé aux volumes ou aux qtrees sélectionnés, séparés par des virgules.
+
*** Vous pouvez sélectionner plusieurs volumes et qtrees.
*** Si le type de ressource est LUN, l'intégralité du LUN est restaurée.  Vous pouvez sélectionner plusieurs LUN.  + REMARQUE : si vous sélectionnez *Tous*, tous les fichiers sur les volumes, les qtrees ou les LUN sont restaurés.




. Dans la page *Pré-opérations*, saisissez les commandes de pré-restauration et de démontage à exécuter avant d'effectuer une tâche de restauration.
. Dans la page *Post ops*, saisissez les commandes mount et post restore à exécuter après avoir effectué une tâche de restauration.
. Dans la page *Notification*, dans la liste déroulante *Préférence de courrier électronique*, sélectionnez les scénarios dans lesquels vous souhaitez envoyer les courriers électroniques.
+
Vous devez également spécifier les adresses e-mail de l'expéditeur et du destinataire, ainsi que l'objet de l'e-mail.  SMTP doit également être configuré dans la page *Paramètres* > *Paramètres globaux*.

. Consultez le résumé, puis cliquez sur *Terminer*.
. Surveillez la progression de l'opération en cliquant sur *Surveiller* > *Tâches*.


--
.applets de commande PowerShell
--
.Étapes
. Lancez une session de connexion avec le serveur SnapCenter pour un utilisateur spécifié à l’aide de l’applet de commande Open-SmConnection.
+
[listing]
----
PS C:\> Open-Smconnection
----
. Récupérez les informations sur la ou les sauvegardes que vous souhaitez restaurer à l’aide des applets de commande Get-SmBackup et Get-SmBackupReport.
+
Cet exemple affiche des informations sur toutes les sauvegardes disponibles :

+
[listing]
----
PS C:\> Get-SmBackup

BackupId                      BackupName                    BackupTime                    BackupType
--------                      ----------                    ----------                    ----------
  1               Payroll Dataset_vise-f6_08... 8/4/2015    11:02:32 AM                 Full Backup
  2               Payroll Dataset_vise-f6_08... 8/4/2015    11:23:17 AM
----
+
Cet exemple affiche des informations détaillées sur la sauvegarde du 29 janvier 2015 au 3 février 2015 :

+
[listing]
----
PS C:\> Get-SmBackupReport -FromDateTime "1/29/2015" -ToDateTime "2/3/2015"

   SmBackupId           : 113
   SmJobId              : 2032
   StartDateTime        : 2/2/2015 6:57:03 AM
   EndDateTime          : 2/2/2015 6:57:11 AM
   Duration             : 00:00:07.3060000
   CreatedDateTime      : 2/2/2015 6:57:23 AM
   Status               : Completed
   ProtectionGroupName  : Clone
   SmProtectionGroupId  : 34
   PolicyName           : Vault
   SmPolicyId           : 18
   BackupName           : Clone_SCSPR0019366001_02-02-2015_06.57.08
   VerificationStatus   : NotVerified

   SmBackupId           : 114
   SmJobId              : 2183
   StartDateTime        : 2/2/2015 1:02:41 PM
   EndDateTime          : 2/2/2015 1:02:38 PM
   Duration             : -00:00:03.2300000
   CreatedDateTime      : 2/2/2015 1:02:53 PM
   Status               : Completed
   ProtectionGroupName  : Clone
   SmProtectionGroupId  : 34
   PolicyName           : Vault
   SmPolicyId           : 18
   BackupName           : Clone_SCSPR0019366001_02-02-2015_13.02.45
   VerificationStatus   : NotVerified
----
. Restaurez les données à partir de la sauvegarde à l’aide de l’applet de commande Restore-SmBackup.
+
[listing]
----
Restore-SmBackup -PluginCode 'DummyPlugin' -AppObjectId 'scc54.sccore.test.com\DummyPlugin\NTP\DB1' -BackupId 269 -Confirm:$false
output:
Name                : Restore 'scc54.sccore.test.com\DummyPlugin\NTP\DB1'
Id                  : 2368
StartTime           : 10/4/2016 11:22:02 PM
EndTime             :
IsCancellable       : False
IsRestartable       : False
IsCompleted         : False
IsVisible           : True
IsScheduled         : False
PercentageCompleted : 0
Description         :
Status              : Queued
Owner               :
Error               :
Priority            : None
Tasks               : {}
ParentJobID         : 0
EventId             : 0
JobTypeId           :
ApisJobKey          :
ObjectId            : 0
PluginCode          : NONE
PluginName          :
----


Les informations concernant les paramètres pouvant être utilisés avec l'applet de commande et leurs descriptions peuvent être obtenues en exécutant _Get-Help command_name_. Alternativement, vous pouvez également vous référer à la https://docs.netapp.com/us-en/snapcenter-cmdlets/index.html["Guide de référence de l'applet de commande du logiciel SnapCenter"^] .

--
====